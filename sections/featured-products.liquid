{% assign featured = settings['featured-products'].settings %}
<section class="featured-products">
  <h2>{{ featured.heading }}</h2>
  <div class="product-list">
    {% for product in products %}
      <div class="product-wrapper {% if forloop.index > 4 %}hidden{% endif %}">
        {% render 'product-card', product: product %}
      </div>
    {% endfor %}
  </div>
  <button id="toggleProducts" class="toggle-btn">{{ featured.button_text }}</button>
</section>


<script>
  document.addEventListener('DOMContentLoaded', () => {
    const revealCards = document.querySelectorAll('.product-wrapper');

    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          entry.target.classList.add('visible');
        }
      });
    }, {
      threshold: 0.1
    });

    revealCards.forEach(card => {
      card.classList.add('reveal');
      observer.observe(card);
    });

    // Funcionalidad del botÃ³n "View All"
    const toggleBtn = document.getElementById('toggleProducts');
    let showingAll = false;

    toggleBtn.addEventListener('click', () => {
      const hiddenCards = document.querySelectorAll('.product-wrapper.hidden');

      hiddenCards.forEach(card => {
        card.classList.toggle('hidden');
      });

      showingAll = !showingAll;
      toggleBtn.textContent = showingAll ? 'View Less' : 'View All';
    });
  });
</script>



<!--<section class="featured-products">
  <h2>{{ settings['featured-products'].settings.heading }}</h2>
  <div class="product-list">
    {% for product in products %}
      {% render 'product-card', product: product %}
    {% endfor %}
  </div>
</section>-->
